{"version":3,"sources":["../../../../../plugins/wordpress/src/index.ts"],"sourcesContent":["import { IPlugin, PlatformCapabilities, PublishOptions, PublishResult } from \"siyuan-plugin-publisher-types\"\nimport { Post } from \"zhi-blog-api\"\nimport { AuthMode, PlatformType, SubPlatformType } from \"siyuan-plugin-publisher-types\"\n\nexport class WordPressPlugin implements IPlugin {\n  readonly id = \"wordpress\"\n  readonly name = \"WordPress\"\n  readonly group = \"blog\"\n  readonly version = \"0.0.1\"\n  readonly description = \"WordPress publishing platform\"\n  readonly author = \"Terwer\"\n\n  readonly capabilities: PlatformCapabilities = {\n    supportsCategories: true,\n    supportsTags: true,\n    supportsCustomFields: true,\n    supportsMediaUpload: true,\n    supportsDraft: true,\n    supportsScheduledPublish: true,\n    supportsCustomTemplates: true,\n    supportsCustomDomain: true,\n    supportsCustomCSS: true,\n    supportsCustomJS: true,\n  }\n\n  readonly configSchema = {\n    type: \"object\",\n    properties: {\n      endpoint: {\n        type: \"string\",\n        title: \"WordPress REST API Endpoint\",\n        description: \"Your WordPress site's REST API endpoint (e.g., https://your-site.com/wp-json/wp/v2)\",\n      },\n      username: {\n        type: \"string\",\n        title: \"Username\",\n        description: \"WordPress username\",\n      },\n      password: {\n        type: \"string\",\n        title: \"Application Password\",\n        description: \"WordPress application password\",\n        format: \"password\",\n      },\n    },\n    required: [\"endpoint\", \"username\", \"password\"],\n  }\n\n  readonly defaultConfig = {\n    endpoint: \"\",\n    username: \"\",\n    password: \"\",\n  }\n\n  private config: Record<string, any> = {}\n\n  async init(config: Record<string, any>): Promise<void> {\n    this.config = { ...this.defaultConfig, ...config }\n  }\n\n  async destroy(): Promise<void> {\n    this.config = {}\n  }\n\n  async publish(post: Post, options?: PublishOptions): Promise<PublishResult> {\n    try {\n      // TODO: 实现发布逻辑\n      return {\n        success: true,\n        data: \"Post published successfully\",\n      }\n    } catch (error) {\n      return {\n        success: false,\n        data: \"Failed to publish to WordPress\",\n        error: {\n          name: \"WordPressPublishError\",\n          code: \"PUBLISH_ERROR\",\n          message: error instanceof Error ? error.message : \"Unknown error occurred\",\n        },\n      }\n    }\n  }\n\n  getPlatformType(): PlatformType {\n    return PlatformType.Wordpress\n  }\n\n  getSubPlatformType(): SubPlatformType {\n    return SubPlatformType.Wordpress_Wordpress\n  }\n\n  getAuthMode(): AuthMode {\n    return AuthMode.API\n  }\n\n  validateConfig(config: Record<string, any>): { valid: boolean; error?: string } {\n    try {\n      // TODO: 实现配置验证逻辑\n      return { valid: true }\n    } catch (error) {\n      return {\n        valid: false,\n        error: error instanceof Error ? error.message : \"Invalid configuration\",\n      }\n    }\n  }\n}\n\nexport default WordPressPlugin "],"mappings":";AAEA,SAAS,UAAU,cAAc,uBAAuB;AAEjD,IAAM,kBAAN,MAAyC;AAAA,EAAzC;AACL,SAAS,KAAK;AACd,SAAS,OAAO;AAChB,SAAS,QAAQ;AACjB,SAAS,UAAU;AACnB,SAAS,cAAc;AACvB,SAAS,SAAS;AAElB,SAAS,eAAqC;AAAA,MAC5C,oBAAoB;AAAA,MACpB,cAAc;AAAA,MACd,sBAAsB;AAAA,MACtB,qBAAqB;AAAA,MACrB,eAAe;AAAA,MACf,0BAA0B;AAAA,MAC1B,yBAAyB;AAAA,MACzB,sBAAsB;AAAA,MACtB,mBAAmB;AAAA,MACnB,kBAAkB;AAAA,IACpB;AAEA,SAAS,eAAe;AAAA,MACtB,MAAM;AAAA,MACN,YAAY;AAAA,QACV,UAAU;AAAA,UACR,MAAM;AAAA,UACN,OAAO;AAAA,UACP,aAAa;AAAA,QACf;AAAA,QACA,UAAU;AAAA,UACR,MAAM;AAAA,UACN,OAAO;AAAA,UACP,aAAa;AAAA,QACf;AAAA,QACA,UAAU;AAAA,UACR,MAAM;AAAA,UACN,OAAO;AAAA,UACP,aAAa;AAAA,UACb,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,MACA,UAAU,CAAC,YAAY,YAAY,UAAU;AAAA,IAC/C;AAEA,SAAS,gBAAgB;AAAA,MACvB,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,IACZ;AAEA,SAAQ,SAA8B,CAAC;AAAA;AAAA,EAEvC,MAAM,KAAK,QAA4C;AACrD,SAAK,SAAS,EAAE,GAAG,KAAK,eAAe,GAAG,OAAO;AAAA,EACnD;AAAA,EAEA,MAAM,UAAyB;AAC7B,SAAK,SAAS,CAAC;AAAA,EACjB;AAAA,EAEA,MAAM,QAAQ,MAAY,SAAkD;AAC1E,QAAI;AAEF,aAAO;AAAA,QACL,SAAS;AAAA,QACT,MAAM;AAAA,MACR;AAAA,IACF,SAAS,OAAO;AACd,aAAO;AAAA,QACL,SAAS;AAAA,QACT,MAAM;AAAA,QACN,OAAO;AAAA,UACL,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS,iBAAiB,QAAQ,MAAM,UAAU;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EAEA,kBAAgC;AAC9B,WAAO,aAAa;AAAA,EACtB;AAAA,EAEA,qBAAsC;AACpC,WAAO,gBAAgB;AAAA,EACzB;AAAA,EAEA,cAAwB;AACtB,WAAO,SAAS;AAAA,EAClB;AAAA,EAEA,eAAe,QAAiE;AAC9E,QAAI;AAEF,aAAO,EAAE,OAAO,KAAK;AAAA,IACvB,SAAS,OAAO;AACd,aAAO;AAAA,QACL,OAAO;AAAA,QACP,OAAO,iBAAiB,QAAQ,MAAM,UAAU;AAAA,MAClD;AAAA,IACF;AAAA,EACF;AACF;AAEA,IAAO,gBAAQ;","names":[]}