@import '../base/variables.styl'
@import '../base/mixins.styl'

// 输入框基础变量
$tg-input-height = 32px
$tg-input-height-large = 40px
$tg-input-height-small = 24px
$tg-input-padding = 0 12px
$tg-input-font-size = 14px
$tg-input-border-radius = $tg-border-radius-base
$tg-input-border-color = var(--tg-color-border)
$tg-input-border-color-hover = var(--tg-color-primary)
$tg-input-border-color-focus = var(--tg-color-primary)
$tg-input-bg = var(--tg-color-bg)
$tg-input-color = var(--tg-color-text)
$tg-input-placeholder-color = var(--tg-color-text-placeholder)
$tg-input-disabled-bg = var(--tg-color-disabled)
$tg-input-disabled-color = var(--tg-color-text-disabled)
$tg-input-disabled-border-color = var(--tg-color-border-disabled)

// 状态颜色
$tg-input-error-border-color = var(--tg-color-danger)
$tg-input-warning-border-color = var(--tg-color-warning)
$tg-input-success-border-color = var(--tg-color-success)

// 输入框基础样式
.tg-input
  position: relative
  display: inline-flex
  align-items: center
  width: 100%
  height: $tg-height-base
  padding: 0 $tg-spacing-md
  font-size: $tg-font-size-base
  border-radius: $tg-border-radius-base
  border: 1px solid var(--tg-color-border)
  background: var(--tg-color-bg)
  color: var(--tg-color-text)
  transition: all 0.3s

  &:hover
    border-color: var(--tg-color-primary)

  &:focus-within
    border-color: var(--tg-color-primary)
    box-shadow: 0 0 0 2px var(--tg-color-primary-light)

  // 尺寸变体
  &--large
    height: $tg-height-lg
    font-size: $tg-font-size-lg
    padding: 0 $tg-spacing-lg

  &--small
    height: $tg-height-sm
    font-size: $tg-font-size-sm
    padding: 0 $tg-spacing-sm

  // 状态变体
  &--disabled
    cursor: not-allowed
    background: var(--tg-color-bg-disabled)
    border-color: var(--tg-color-border-disabled)
    color: var(--tg-color-text-disabled)

    &:hover
      border-color: var(--tg-color-border-disabled)

  &--readonly
    background: var(--tg-color-bg-disabled)
    cursor: default

  &--textarea
    height: auto
    padding: 0

  &--error
    border-color: var(--tg-color-danger)

    &:hover
      border-color: var(--tg-color-danger)

    &:focus-within
      border-color: var(--tg-color-danger)
      box-shadow: 0 0 0 2px var(--tg-color-danger-light)

  &--warning
    border-color: var(--tg-color-warning)

    &:hover
      border-color: var(--tg-color-warning)

    &:focus-within
      border-color: var(--tg-color-warning)
      box-shadow: 0 0 0 2px var(--tg-color-warning-light)

  &--success
    border-color: var(--tg-color-success)

    &:hover
      border-color: var(--tg-color-success)

    &:focus-within
      border-color: var(--tg-color-success)
      box-shadow: 0 0 0 2px var(--tg-color-success-light)

  // 内部元素样式
  &__wrapper
    position: relative
    display: inline-flex
    align-items: center
    width: 100%

  &__inner
    flex: 1
    width: 100%
    height: 100%
    padding: 0
    border: none
    outline: none
    background: transparent
    color: inherit
    font-size: inherit

    &::placeholder
      color: var(--tg-color-text-placeholder)

  &__textarea
    width: 100%
    min-height: $tg-height-base
    padding: $tg-spacing-sm
    font-size: $tg-font-size-base
    line-height: 1.5
    color: var(--tg-color-text)
    background: var(--tg-color-bg)
    border: 0.5px solid var(--tg-color-border)
    border-radius: $tg-border-radius-base
    outline: none
    resize: vertical
    transition: all 0.3s

    &:hover
      border-color: var(--tg-color-primary)

    &:focus
      border-color: var(--tg-color-primary)
      box-shadow: 0 0 0 1px var(--tg-color-primary-light)

    &::placeholder
      color: var(--tg-color-text-placeholder)

    &:disabled
      cursor: not-allowed
      background: var(--tg-color-bg-disabled)
      border-color: var(--tg-color-border-disabled)
      color: var(--tg-color-text-disabled)

      &:hover
        border-color: var(--tg-color-border-disabled)

    &:read-only
      background: var(--tg-color-bg-disabled)
      cursor: default

  &__prefix
    margin-right: $tg-spacing-sm
    color: var(--tg-color-text-secondary)

  &__suffix
    margin-left: $tg-spacing-sm
    color: var(--tg-color-text-secondary)

  &__clear
    margin-left: $tg-spacing-sm
    color: var(--tg-color-text-secondary)
    cursor: pointer
    transition: color 0.3s

    &:hover
      color: var(--tg-color-text)

  &__password-toggle
    margin-left: $tg-spacing-sm
    color: var(--tg-color-text-secondary)
    cursor: pointer
    transition: color 0.3s

    &:hover
      color: var(--tg-color-text)
